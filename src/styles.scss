/* =========================================
   Global Styles (Angular Material v17)
   Light / Dark theming with html.dark toggle
   ========================================= */

   @use '@angular/material' as mat;

   /* ---------------------------
      1) Angular Material Theme
      - html  … light
      - html.dark … dark
      --------------------------- */
   
   /* Light theme */
   html {
     @include mat.theme((
       color: (
         theme-type: light,
         primary: mat.$azure-palette,
         tertiary: mat.$blue-palette,
       ),
       typography: Roboto,
       density: 0
     ));
   }
   
   /* Dark theme */
   html.dark {
     @include mat.theme((
       color: (
         theme-type: dark,
         primary: mat.$azure-palette,
         tertiary: mat.$blue-palette,
       ),
       typography: Roboto,
       density: 0
     ));
   }
   
   /* ---------------------------
      2) App Color Tokens (CSS variables)
      - Light / Dark surface set
      --------------------------- */

   :root {
     --radius:   12px;
     --bg:       #f5f6f8;
     --surface:  #ffffff;
     --fg:       #111111;
     --muted:    #6b7280;
     --border:   #d7dce3;
     --accent:   #2563eb;
   }

   :root.dark {
     --radius:   12px;
     --bg:       #1c1d20;
     --surface:  #2a2d33;
     --fg:       #e6eaf0;
     --muted:    #9da5b4;
     --border:   #343843;
     --accent:   #60a5fa;
     color-scheme: dark;
   }
   
   /* ---------------------------
      3) Base
      --------------------------- */
   
   * { box-sizing: border-box; }
   html, body {
     height: 100%;
     background: var(--bg);
     color: var(--fg);
     margin: 0;
     -webkit-font-smoothing: antialiased;
     -moz-osx-font-smoothing: grayscale;
   }
   
   /* ほんのりトランジション（重いと感じたら消してOK） */
   body, .mat-mdc-card, .mat-mdc-menu-panel, .mat-mdc-dialog-container .mdc-dialog__surface {
     transition: background-color 120ms linear, color 120ms linear, border-color 120ms linear;
   }
   
   /* Links */
   a, a:visited {
     color: var(--accent);
     text-decoration: none;
   }
   a:hover { text-decoration: underline; }
   
   /* Headings */
   h1, h2, h3, h4, h5, h6 { margin: 0 0 .5rem; }
   
   /* ---------------------------
      4) Common Surfaces
      --------------------------- */
   
   .card, .mat-mdc-card {
     background: var(--surface);
     color: var(--fg);
     border: 1px solid var(--border);
     border-radius: var(--radius);
   }
   
   /* Material overlays (menu/select/dialog/snackbar) */
   .mat-mdc-menu-panel,
   .mat-mdc-select-panel,
   .mat-mdc-dialog-container .mdc-dialog__surface,
   .mat-mdc-snack-bar-container {
     background: var(--surface);
     color: var(--fg);
     border: 1px solid var(--border);
   }
   
   /* chips / table / list (軽く色合わせ) */
   .mat-mdc-standard-chip, .mat-mdc-chip-set {
     background: var(--surface);
     color: var(--fg);
   }
   
   .mat-mdc-table, .mat-mdc-row, .mat-mdc-cell, .mat-mdc-header-row, .mat-mdc-header-cell {
     background: var(--surface);
     color: var(--fg);
     border-color: var(--border);
   }
   
   /* divider */
   .mat-divider, hr {
     border-color: var(--border) !important;
     opacity: .9;
   }
   
   /* ---------------------------
      5) Form controls (軽い調整)
      --------------------------- */
   
   .mdc-text-field, .mat-mdc-form-field-subscript-wrapper {
     color: var(--fg);
   }
   .mdc-text-field--filled {
     background: color-mix(in oklab, var(--surface) 92%, black 8%) !important;
   }
   .mdc-line-ripple::after {
     border-bottom-color: var(--accent) !important;
   }
   
   /* placeholder / helper */
   ::placeholder { color: var(--muted); opacity: .9; }
   
   /* ---------------------------
      6) Buttons (微調整)
      --------------------------- */
   
   /* Text buttons の hover を少し見やすく */
   .mdc-button:hover .mdc-button__label { opacity: .9; }
   
   /* Stroked button の枠色 */
   .mat-mdc-outlined-button:not(:disabled) {
     border-color: var(--border);
   }
   
   /* ---------------------------
      7) Scrollbar (optional)
      --------------------------- */
   
   * {
     scrollbar-width: thin;
     scrollbar-color: #2a313a transparent;
   }
   *::-webkit-scrollbar { height: 10px; width: 10px; }
   *::-webkit-scrollbar-thumb { background: #2a313a; border-radius: 8px; }
   *::-webkit-scrollbar-track { background: transparent; }
   
   /* ---------------------------
      8) Utilities
      --------------------------- */
   
   .muted { color: var(--muted); }
   .bordered { border: 1px solid var(--border); border-radius: 8px; }
   .surface { background: var(--surface); }
   
   /* Sticky header がある場合の保険（必要なら） */
   /* .cdk-overlay-container { z-index: 2000; } */
   
   /* ---------------------------
      9) Layout Shell
      --------------------------- */

   .shell {
     height: 100vh;
     background: var(--bg);
   }

   .shell__sidenav {
     width: min(320px, 90vw);
     border-right: 1px solid var(--border);
     background: var(--bg);
     color: var(--fg);
     padding: 16px;
   }

   .sidenav__wrapper {
     display: flex;
     flex-direction: column;
     gap: 16px;
     height: 100%;
   }

   .sidenav__header {
     display: flex;
     align-items: center;
     gap: 10px;
     font-weight: 600;
     font-size: 1rem;
   }

   .sidenav__header .mat-icon {
     font-size: 1.4rem;
     width: 1.4rem;
     height: 1.4rem;
   }

   .shell__content {
     background: var(--bg);
     color: var(--fg);
   }

   .topbar {
     position: sticky;
     top: 0;
     z-index: 1000;
     display: flex;
     gap: 12px;
   }

   .topbar .mat-mdc-button {
     border-radius: 999px;
   }

   .brand {
     display: flex;
     align-items: center;
     gap: 8px;
     font-weight: 600;
     text-transform: uppercase;
     letter-spacing: 0.08em;
   }

   .brand .mat-icon {
     font-size: 1.4rem;
     width: 1.4rem;
     height: 1.4rem;
   }

   .menu-button {
     margin-right: 4px;
   }

   .topnav {
     display: flex;
     align-items: center;
     gap: 4px;
   }

   .topnav a.active {
     background: rgba(255, 255, 255, 0.18);
     color: #fff;
     box-shadow: inset 0 -3px 0 0 rgba(255, 255, 255, 0.45);
   }

   .spacer {
     flex: 1 1 auto;
   }

   .topbar-actions {
     display: flex;
     align-items: center;
   }

   .filter-placeholder {
     display: inline-flex;
     align-items: center;
     gap: 6px;
     border-radius: 999px !important;
   }

   .content-area {
     min-height: calc(100vh - 64px);
     padding: 24px;
     background: var(--bg);
   }

   @media (max-width: 959px) {
     .content-area {
       padding: 16px;
     }

     .topbar-actions {
       display: none;
     }

     .topnav {
       overflow-x: auto;
     }
   }
