.task-row {
  /* 横並び:
     [左のステータス丸] [本文] [右のアクションボタン群]
     スマホ幅ではアクションだけ下段に折り返す
  */
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  border: 1px solid var(--border);
  border-radius: 16px;
  background: var(--surface);
  transition: box-shadow 120ms ease, transform 120ms ease;
  min-width: 0; /* ←中身のflexが正しく折り返せるように */

  &:hover {
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.08);
    transform: translateY(-1px);
  }

  &.done {
    opacity: 0.65;
  }

  &.dense {
    padding: 10px 14px;
  }
}

/* ===== 左カラム：ステータス点 ===== */
.status-col {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  padding-top: 4px;
}

.status-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

/* ===== 本文カラム ===== */
.task-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0; /* ←これがないとタイトルが暴れる */
}

.task-title {
  display: flex;
  align-items: baseline;
  gap: 8px;
  font-weight: 600;
  line-height: 1.4;
  min-width: 0;
}

.title-text {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.priority {
  font-size: 12px;
  color: var(--muted);
}

/* 期日・担当者・コメント数など */
.task-meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px 12px;
  font-size: 13px;
  line-height: 1.4;
  color: var(--muted);
  min-width: 0;
}

/* 期日バッジ（期限ラベル） */
.pill {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  line-height: 1.3;
  border: 1px solid transparent;
  white-space: nowrap; /* pillは途中改行させない */
}

.pill-icon {
  font-size: 16px;
  line-height: 1;
}

/* 期日バッジの色 */
.pill.overdue {
  background: rgba(220, 38, 38, 0.12);
  color: #b91c1c;
}
.pill.today {
  background: rgba(59, 130, 246, 0.12);
  color: #2563eb;
}
.pill.soon {
  background: rgba(249, 115, 22, 0.12);
  color: #c2410c;
}
.pill.later {
  background: rgba(22, 163, 74, 0.12);
  color: #15803d;
}
.pill.none {
  background: rgba(107, 114, 128, 0.08);
  color: var(--muted);
}

/* 担当者 / コメント数 / 添付数 などの小チップ */
.meta-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  line-height: 1.4;
  color: var(--muted);

  /* ここ重要：
     nowrap で1かたまりとして扱うことで
     "group" "forum" "attach_file" みたいな
     アイコンフォントがバラバラ崩れない
  */
  white-space: nowrap;
}

.chip-icon {
  font-size: 16px;
  line-height: 1;
}

.chip-text {
  max-width: 160px;
  text-overflow: ellipsis;
  overflow: hidden;
}

/* ===== 右カラム：アクションボタン列 ===== */
.actions {
  /* 一番の問題児。ここを無理に縮めさせない */
  display: inline-flex;
  align-items: flex-start;
  gap: 4px;

  /* flex: 0 0 auto で「縮まない」ことを保証 */
  flex: 0 0 auto;

  /* これが超重要！
     右端エリアに最低幅を与えることで
     gridの3列目(auto)が潰されなくなる。
     （ボタン4つ分 + 余白）
  */
  min-width: 140px;

  /* ボタンが潰れきらず、アイコンのligatureが
     "tas ev ev op" みたいに文字化けしない
  */
}

/* 各アクションボタン */
.action-btn,
.actions [mat-icon-button] {
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  padding: 0;
  line-height: 1;

  /* これでボタン自体も「縮まない」 */
  flex: 0 0 36px;
}

/* アイコン自体も潰されないように */
.action-btn mat-icon,
.actions [mat-icon-button] mat-icon {
  font-size: 20px;
  line-height: 1;
  width: 20px;
  min-width: 20px;
  text-align: center;

  /* material-icons の文字(=ligature)が
     途中だけ露出しないように */
  overflow: hidden;
  white-space: nowrap;
}

/* ===== スマホ幅対策 =====
   幅がかなり狭いときはアクションを下段に折り返す
   （= 2行構成にする）
*/
@media (max-width: 480px) {
  .task-row {
    grid-template-columns: auto 1fr;
  }

  .actions {
    grid-column: 1 / span 2;
    justify-content: flex-end;
    padding-top: 8px;

    /* 下段に落ちてもつぶれないように */
    min-width: 0;
    flex-wrap: wrap;
  }
}


